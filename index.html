<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dbara Tounsiya â€“ Ramadhan Night Iftar Picker </title>
<link rel="stylesheet" href="styles.css">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>

</style>
</head>
<body>
  
<nav class="navbar">
  <div class="logo">ğŸŒ™ Dbara Tounsiya</div>

  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="List.html">Menu</a></li>
    <li><a href="Imsakeya.html">Imsakeya</a></li>
    <li><a href="suggest.html">Suggest</a></li>
  </ul>
</nav>

<div id="iftarCountdown"></div>

<div class="container">

  <div class="card">
    <div class="category">ğŸ¥£ Soup</div>
    <img id="soupImage" class="food-img" src="placeholder.png">
    <div class="result" id="soupResult">Click Spin</div>
    <button onclick="spin('soup')">GÃ©nÃ©rer</button>
  </div>

  <div class="card">
    <div class="category">ğŸ¥— Salade</div>
    <img id="SaladeImage" class="food-img" src="placeholder.png">
    <div class="result" id="SaladeResult">Click Spin</div>
    <button onclick="spin('Salade')">GÃ©nÃ©rer</button>
  </div>

  <div class="card">
    <div class="category">ğŸ¥Ÿ EntrÃ©e</div>
    <img id="starterImage" class="food-img" src="placeholder.png">
    <div class="result" id="starterResult">Click Spin</div>
    <button onclick="spin('starter')">GÃ©nÃ©rer</button>
  </div>

  <div class="card">
    <div class="category">ğŸ² Plat Principal</div>
    <img id="mainImage" class="food-img" src="placeholder.png">
    <div class="result" id="mainResult">Click Spin</div>
    <button onclick="spin('main')">GÃ©nÃ©rer</button>
  </div>

  <div class="card">
    <div class="category">ğŸ« Dessert</div>
    <img id="DessertImage" class="food-img" src="placeholder.png">
    <div class="result" id="DessertResult">Click Spin</div>
    <button onclick="spin('Dessert')">GÃ©nÃ©rer</button>
  </div>

</div>

<div class="generate-all">
  <button onclick="spinAll()">GÃ©nÃ©rer un menu complet</button>
</div>





<audio autoplay loop>
   <source src="ramadhan.mp3" type="audio/mpeg">
</audio>

<audio id="spinSound">
   <source src="spin.mp3" type="audio/mpeg">
</audio>

<!-- ğŸ”¥ LOAD DATABASE -->
<script src="data.js"></script>

<script>
const data = foodData;

const used = {soup:[],Salade:[],starter:[],main:[],Dessert:[]};

function getRandom(type){
  if(used[type].length === data[type].length) used[type] = [];
  let remaining = data[type].filter(item => !used[type].includes(item));
  let randomItem = remaining[Math.floor(Math.random()*remaining.length)];
  used[type].push(randomItem);
  return randomItem;
}

function spin(type){
  const result = document.getElementById(type+'Result');
  const img = document.getElementById(type+'Image');
  const sound = document.getElementById('spinSound');
  let counter=0;

  const interval = setInterval(()=>{
    const r = data[type][Math.floor(Math.random()*data[type].length)];
    result.innerText = r.name;
    img.src = r.img || "placeholder.png";
    img.style.opacity = 0.5;
    sound.currentTime = 0;
    sound.play();
    counter++;

    if(counter>15){
      clearInterval(interval);
      const final = getRandom(type);
      result.innerText = final.name;
      img.src = final.img || "placeholder.png";
      img.style.opacity = 1;
    }
  },80);
}

function spinAll(){
  spin("soup");
  spin("Salade");
  spin("starter");
  spin("main");
  spin("Dessert");
}

function createNightElements(){
  for(let i=0;i<40;i++){
    const star=document.createElement('div');
    star.className='star';
    star.style.top=Math.random()*window.innerHeight+'px';
    star.style.left=Math.random()*window.innerWidth+'px';
    star.style.animationDuration=(5+Math.random()*5)+'s';
    document.body.appendChild(star);
  }

  for(let i=0;i<10;i++){
    const lantern=document.createElement('div');
    lantern.className='lantern';
    lantern.style.left=Math.random()*window.innerWidth+'px';
    lantern.style.bottom='-20px';
    lantern.style.animationDuration=(10+Math.random()*10)+'s';
    document.body.appendChild(lantern);
  }

  const moon=document.createElement('div');
  moon.className='moon';
  document.body.appendChild(moon);
}

createNightElements();
</script>
<script>
let lastScroll = 0;
const navbar = document.querySelector(".navbar");

window.addEventListener("scroll", () => {
  let currentScroll = window.pageYOffset;

  if(currentScroll > lastScroll && currentScroll > 80){
    // scrolling down
    navbar.classList.add("hide");
  } else {
    // scrolling up
    navbar.classList.remove("hide");
  }

  lastScroll = currentScroll;
});


const iftarTimes = [
  "2026-02-19T18:04:00", // Day 1
  "2026-02-20T18:05:00", // Day 2
  "2026-02-21T18:06:00",
  "2026-02-22T18:07:00",
  "2026-02-23T18:08:00",
  "2026-02-24T18:09:00",
  "2026-02-25T18:10:00",
  "2026-02-26T18:11:00",
  "2026-02-27T18:12:00",
  "2026-02-28T18:13:00",
  "2026-03-01T18:14:00",
  "2026-03-02T18:15:00",
  "2026-03-03T18:16:00",
  "2026-03-04T18:17:00",
  "2026-03-05T18:18:00",
  "2026-03-06T18:19:00",
  "2026-03-07T18:20:00",
  "2026-03-08T18:21:00",
  "2026-03-09T18:22:00",
  "2026-03-10T18:22:00",
  "2026-03-11T18:23:00",
  "2026-03-12T18:24:00",
  "2026-03-13T18:25:00",
  "2026-03-14T18:26:00",
  "2026-03-15T18:27:00",
  "2026-03-16T18:28:00",
  "2026-03-17T18:29:00",
  "2026-03-18T18:30:00",
  "2026-03-19T18:31:00",
  "2026-03-20T18:31:00",
];

function updateIftarCountdown() {
  const now = new Date();
  const todayIndex = now.getDate() - 19; // Feb 19 = day 1
  if(todayIndex < 0 || todayIndex >= iftarTimes.length){
    document.getElementById("iftarCountdown").innerText = "Ramadhan not started or finished ğŸŒ™";
    return;
  }

  const iftarTime = new Date(iftarTimes[todayIndex]).getTime();
  const distance = iftarTime - now;

  if(distance <= 0){
    document.getElementById("iftarCountdown").innerText = "Sa7a Chribitkom! ğŸŒ™ğŸ½ï¸";
    return;
  }

  const hours = Math.floor((distance % (1000*60*60*24)) / (1000*60*60));
  const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
  const seconds = Math.floor((distance % (1000*60)) / 1000);

  document.getElementById("iftarCountdown").innerText =
    `Cha9an Fater : ${hours}h ${minutes}m ${seconds}s ğŸŒ™`;
}

setInterval(updateIftarCountdown, 1000);
updateIftarCountdown();
</script>
</body>


<footer class="footer">
  <p>Â© 2026 Dbara Tounsiya â€“ All Rights Reserved</p>
  <p>
    Made with â¤ï¸ by 
    <strong>Ali Hadj Hassen</strong>
  </p>
  <a href="https://www.instagram.com/hassanalihadj/" target="_blank" class="insta-link">
    ğŸ“¸ Follow me on Instagram
  </a>
</footer>
</html>
