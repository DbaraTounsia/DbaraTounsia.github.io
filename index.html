<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dbara Tounsiya ‚Äì Ramadhan Night Iftar Picker</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
html { scroll-behavior: smooth; }

body {
  background: linear-gradient(135deg,#0a0a1a,#1b1b40);
  color:white;
  min-height:100vh;
  text-align:center;
  position:relative;
  overflow-x:hidden;
}

header { padding:30px; font-size:2rem; font-weight:700; }

.container { display:flex; justify-content:center; gap:30px; flex-wrap:wrap; padding:20px; position:relative; z-index:10; }

.card {
  width:300px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(15px);
  border-radius:20px;
  padding:20px;
  box-shadow:0 15px 40px rgba(0,0,0,0.6);
  transition:0.3s ease;
  position:relative;
  z-index:10;
}
.card:hover { transform:translateY(-10px); }

.category { font-size:1rem; font-weight:300; opacity:0.7; margin-bottom:10px; }
.result { font-size:1.2rem; min-height:50px; margin:15px 0; }

.food-img {
  width:100%;
  height:180px;
  object-fit:cover;
  border-radius:15px;
  margin-bottom:10px;
  transition:opacity 0.3s ease;
  opacity:0.7;
}

button {
  background:linear-gradient(45deg,#d4af37,#f5d76e);
  border:none;
  padding:10px 25px;
  border-radius:30px;
  font-weight:500;
  cursor:pointer;
  margin-top:10px;
}
button:hover { transform:scale(1.05); box-shadow:0 5px 20px rgba(255,215,0,0.6); }

.generate-all { margin:30px; }

.gallery-btn{
  margin-top:20px;
  padding:12px 25px;
  border:none;
  border-radius:25px;
  background:linear-gradient(45deg,#ffcc70,#ff8177);
  color:#000;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}
.gallery-btn:hover{ transform:scale(1.1); }

/* üåü Night Elements */
.star, .moon, .lantern {
  position:absolute;
  border-radius:50%;
  pointer-events:none;
  z-index:1;
}

.star {
  background:white;
  width:3px;
  height:3px;
  opacity:0.8;
  animation: floatStars linear infinite;
}

.moon {
  width:50px;
  height:50px;
  background:radial-gradient(circle at 30% 30%, #fff, #ccc);
  top:50px;
  right:50px;
  animation: moonTwinkle 3s ease-in-out infinite alternate;
}

.lantern {
  width:20px;
  height:30px;
  background:linear-gradient(to bottom,#ffa500,#ff4500);
  border-radius:10px 10px 0 0;
  box-shadow:0 0 10px rgba(255,165,0,0.8);
  animation: lanternFloat linear infinite;
  opacity:0.8;
}

@keyframes floatStars {
  0%{transform:translateY(0);}
  50%{transform:translateY(-40px);}
  100%{transform:translateY(0);}
}

@keyframes moonTwinkle {
  0%{transform:scale(1);}
  100%{transform:scale(1.05);}
}

@keyframes lanternFloat {
  0%{transform:translateY(0);}
  100%{transform:translateY(-700px);}
}
</style>
</head>
<body>

<header>üåô Dbara Tounsiya</header>

<div class="container">

  <div class="card">
    <div class="category">ü•£ Soup</div>
    <img id="soupImage" class="food-img" src="placeholder.png">
    <div class="result" id="soupResult">Click Spin</div>
    <button onclick="spin('soup')">G√©n√©rer</button>
  </div>

  <div class="card">
    <div class="category">ü•ó Salade</div>
    <img id="SaladeImage" class="food-img" src="placeholder.png">
    <div class="result" id="SaladeResult">Click Spin</div>
    <button onclick="spin('Salade')">G√©n√©rer</button>
  </div>

  <div class="card">
    <div class="category">ü•ü Entr√©e</div>
    <img id="starterImage" class="food-img" src="placeholder.png">
    <div class="result" id="starterResult">Click Spin</div>
    <button onclick="spin('starter')">G√©n√©rer</button>
  </div>

  <div class="card">
    <div class="category">üç≤ Plat Principal</div>
    <img id="mainImage" class="food-img" src="placeholder.png">
    <div class="result" id="mainResult">Click Spin</div>
    <button onclick="spin('main')">G√©n√©rer</button>
  </div>

  <div class="card">
    <div class="category">üç´ Dessert</div>
    <img id="DessertImage" class="food-img" src="placeholder.png">
    <div class="result" id="DessertResult">Click Spin</div>
    <button onclick="spin('Dessert')">G√©n√©rer</button>
  </div>

</div>

<div class="generate-all">
  <button onclick="spinAll()">G√©n√©rer un menu complet</button>
</div>

<a href="List.html">
  <button class="gallery-btn">üìñ Voir toute la carte</button>
</a>

<audio autoplay loop>
   <source src="ramadhan.mp3" type="audio/mpeg">
</audio>

<audio id="spinSound">
   <source src="spin.mp3" type="audio/mpeg">
</audio>

<!-- üî• LOAD DATABASE -->
<script src="data.js"></script>

<script>
const data = foodData;

const used = {soup:[],Salade:[],starter:[],main:[],Dessert:[]};

function getRandom(type){
  if(used[type].length === data[type].length) used[type] = [];
  let remaining = data[type].filter(item => !used[type].includes(item));
  let randomItem = remaining[Math.floor(Math.random()*remaining.length)];
  used[type].push(randomItem);
  return randomItem;
}

function spin(type){
  const result = document.getElementById(type+'Result');
  const img = document.getElementById(type+'Image');
  const sound = document.getElementById('spinSound');
  let counter=0;

  const interval = setInterval(()=>{
    const r = data[type][Math.floor(Math.random()*data[type].length)];
    result.innerText = r.name;
    img.src = r.img || "placeholder.png";
    img.style.opacity = 0.5;
    sound.currentTime = 0;
    sound.play();
    counter++;

    if(counter>15){
      clearInterval(interval);
      const final = getRandom(type);
      result.innerText = final.name;
      img.src = final.img || "placeholder.png";
      img.style.opacity = 1;
    }
  },80);
}

function spinAll(){
  spin("soup");
  spin("Salade");
  spin("starter");
  spin("main");
  spin("Dessert");
}

function createNightElements(){
  for(let i=0;i<40;i++){
    const star=document.createElement('div');
    star.className='star';
    star.style.top=Math.random()*window.innerHeight+'px';
    star.style.left=Math.random()*window.innerWidth+'px';
    star.style.animationDuration=(5+Math.random()*5)+'s';
    document.body.appendChild(star);
  }

  for(let i=0;i<10;i++){
    const lantern=document.createElement('div');
    lantern.className='lantern';
    lantern.style.left=Math.random()*window.innerWidth+'px';
    lantern.style.bottom='-20px';
    lantern.style.animationDuration=(10+Math.random()*10)+'s';
    document.body.appendChild(lantern);
  }

  const moon=document.createElement('div');
  moon.className='moon';
  document.body.appendChild(moon);
}

createNightElements();
</script>

</body>
</html>

